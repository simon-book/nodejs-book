function IsLogin() { return Cookies.get("UserLogin") != undefined }

// function addHits(n) { $.ajax({ type: "POST", url: "/api/myapi/AddHits?bid=" + n, dataType: "json", cache: !1, timeout: 3e4, success: function() {} }) }

// function BookMark(n, t) { IsLogin() ? $.ajax({ type: "POST", url: "/api/myapi/BookMark?bid=" + n + "&cid=" + t, dataType: "json", cache: !1, timeout: 3e4, success: function() { alert("收藏书签成功!") }, error: function() { alert("未知错误") } }) : alert("请先登录!") }

function tempBook(n, t) { _cookiesUpdate("tempbook", n, t) }

function _cookiesDel(n, t) {
    for (var u, i = Cookies.get(n).split("|"), r = 0; r < i.length; r++) u = i[r].split(","), u[0] == t && i.splice(r, 1);
    Cookies.set(n, i.join("|"), { expires: 365 })
}

function _cookiesUpdate(n, t, i) {
    var f = t + "," + i,
        r, e, u, o;
    if (Cookies.get(n) === undefined) Cookies.set(n, f, { expires: 365 });
    else {
        for (r = Cookies.get(n).split("|"), e = !0, u = 0; u < r.length; u++)
            if (o = r[u].split(","), o[0] == t) {
                o[1] != i && (r[u] = f);
                e = !1;
                break
            } e && (r.length < 20 ? r.push(f) : (r.shift(), r.push(f)));
        Cookies.set(n, r.join("|"), { expires: 365 })
    }
}

function clearTemp() { confirm("实要清空临时书架么?") && (Cookies.remove("tempbook"), $("#UserTempBook").hide()) }

function delcase(n) { confirm("确实要将这书本籍移除临时书架么?") && _delBook(n) }

function _delBook(n) {
    _cookiesDel("tempbook", n);
    $("#t" + n).hide()
}

function nr_setbg(n) {
    var t = document.getElementById("huyandiv"),
        i = document.getElementById("lightdiv");
    n == "huyan" && (t.className == "button huyanon" ? (Cookies.set("light", "huyan", { expires: 1 }), set("light", "huyan")) : (document.cookie = "light=no;path=/", Cookies.set("light", "no", { expires: 1 }), set("light", "no")));
    n == "light" && (i.innerHTML == "关灯" ? (Cookies.set("light", "yes", { expires: 1 }), set("light", "yes")) : (Cookies.set("light", "no", { expires: 1 }), set("light", "no")));
    n == "big" && (Cookies.set("font", "big", { expires: 1 }), set("font", "big"));
    n == "middle" && (Cookies.set("font", "middle", { expires: 1 }), set("font", "middle"));
    n == "small" && (Cookies.set("font", "small", { expires: 1 }), set("font", "small"))
}

function getset() {
    var n = Cookies.get("light"),
        t = Cookies.get("font");
    n == "yes" ? set("light", "yes") : n == "no" ? set("light", "no") : n == "huyan" && set("light", "huyan");
    t == "big" ? set("font", "big") : t == "middle" ? set("font", "middle") : t == "small" ? set("font", "small") : set("font", "middle")
}

function set(n, t) {
    var u = document.getElementById("read"),
        f = document.getElementById("huyandiv"),
        i = document.getElementById("lightdiv"),
        h = document.getElementById("fontfont"),
        e = document.getElementById("fontbig"),
        o = document.getElementById("fontmiddle"),
        s = document.getElementById("fontsmall"),
        r = document.getElementById("chaptercontent");
    n == "light" && (t == "yes" ? (i.innerHTML = "开灯", i.className = "button lighton", u.style.backgroundColor = "#000", f.className = "button huyanon", r.style.color = "#999") : t == "no" ? (i.innerHTML = "关灯", i.className = "button lightoff", u.style.backgroundColor = "#fff", r.style.color = "#000", f.className = "button huyanon") : t == "huyan" && (i.innerHTML = "关灯", i.className = "button lightoff", f.className = "button huyanoff", u.style.backgroundColor = "#005716", r.style.color = "#000", shuqian_2.style.color = "#000"));
    n == "font" && (e.className = "sizebg", o.className = "sizebg", s.className = "sizebg", t == "big" && (e.className = "button sizebgon", r.style.fontSize = "25px"), t == "middle" && (o.className = "button sizebgon", r.style.fontSize = "20px"), t == "small" && (s.className = "button sizebgon", r.style.fontSize = "14px"))
}

// function goToNext() { "undefined" != typeof nextUrl && nextUrl.indexOf("html") > -1 && $.get(nextUrl, function() {}) }

// function longview() {
//     $(".longview").click(function() {
//         var n = $(this).parents(".hot_sale"),
//             t;
//         n.height() == 100 ? (t = n.css("height", "auto").height(), n.css("height", "100px"), n.animate({ height: t }, 100), $(this).animate({ transform: "rotate(180deg)", "-webkit-transform": "rotate(180deg)", "-moz-transform": "rotate(180deg)", "-o-transform": "rotate(180deg)" }, 100)) : (n.animate({ height: "100px" }, 100), $(this).animate({ transform: "rotate(0deg)", "-webkit-transform": "rotate(0deg)", "-moz-transform": "rotate(0deg)", "-o-transform": "rotate(0deg)" }, 100))
//     })
// }

// function slidetop() {
//     var n = $(window).height(),
//         t = n + window.scrollY;
//     t > n ? t >= $("footer").offset().top ? $("#slidetop").css("right", "-50px") : $("#slidetop").css("right", "20px") : $("#slidetop").css("right", "-50px")
// }
// var script, CheckString, _myfilter, __filter;
! function(n) {
    var t = !1,
        r, i;
    ("function" == typeof define && define.amd && (define(n), t = !0), "object" == typeof exports && (module.exports = n(), t = !0), t) || (r = window.Cookies, i = window.Cookies = n(), i.noConflict = function() { return window.Cookies = r, i })
}(function() {
    function n() { for (var i, r, n = 0, t = {}; n < arguments.length; n++) { i = arguments[n]; for (r in i) t[r] = i[r] } return t }
    return function t(i) {
        function r(t, u, f) {
            var o, c, l, s, v, e, h;
            if ("undefined" != typeof document) {
                if (arguments.length > 1) {
                    "number" == typeof(f = n({ path: "/" }, r.defaults, f)).expires && (c = new Date, c.setMilliseconds(c.getMilliseconds() + 864e5 * f.expires), f.expires = c);
                    f.expires = f.expires ? f.expires.toUTCString() : "";
                    try { o = JSON.stringify(u); /^[\{\[]/.test(o) && (u = o) } catch (n) {} u = i.write ? i.write(u, t) : encodeURIComponent(String(u)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);
                    t = (t = (t = encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)).replace(/[\(\)]/g, escape);
                    l = "";
                    for (s in f) f[s] && (l += "; " + s, !0 !== f[s] && (l += "=" + f[s]));
                    return document.cookie = t + "=" + u + l
                }
                t || (o = {});
                for (var y = document.cookie ? document.cookie.split("; ") : [], p = /(%[0-9A-Z]{2})+/g, a = 0; a < y.length; a++) {
                    v = y[a].split("=");
                    e = v.slice(1).join("=");
                    this.json || '"' !== e.charAt(0) || (e = e.slice(1, -1));
                    try {
                        if (h = v[0].replace(p, decodeURIComponent), e = i.read ? i.read(e, h) : i(e, h) || e.replace(p, decodeURIComponent), this.json) try { e = JSON.parse(e) } catch (n) {}
                        if (t === h) { o = e; break } t || (o[h] = e)
                    } catch (n) {}
                }
                return o
            }
        }
        return r.set = r, r.get = function(n) { return r.call(r, n) }, r.getJSON = function() { return r.apply({ json: !0 }, [].slice.call(arguments)) }, r.defaults = {}, r.remove = function(t, i) { r(t, "", n(i, { expires: -1 })) }, r.withConverter = t, r
    }(function() {})
});
// window.Zepto || (script = document.createElement("script"), script.src = "/js/zepto.min.js", document.body.appendChild(script));
// CheckString = function(n, t) {
//     for (var i = 0; i < t.length; i++)
//         if (-1 < n.indexOf(t[i])) return !0;
//     return !1
// };
// _myfilter = ["pinggu.", "zhanzhang", "ziyuan.baidu"];
// CheckString(document.referrer, _myfilter) && Cookies.set("_filterads", "1", { expires: 7 });
// __filter = Cookies.get("__filterads") != undefined;
// String.prototype.trimEnd = function(n) { if (n == null || n == "") { for (var t = this, r = /\s/, i = t.length; r.test(t.charAt(--i));); return t.slice(0, i + 1) } for (var t = this, r = new RegExp(n), i = t.length; r.test(t.charAt(--i));); return t.slice(0, i + 1) };
$(function() {
    var n = $(".searchForm_input"),
        t = $(".searchForm_btn");
    n.focus(function() { $(this).val() == "输入书名•作者" && $(this).val("") });
    n.blur(function() { $(this).val() == "" && $(this).val("输入书名•作者") })
});
$(function() { $("img.lazy").lazyload() });
! function(n, t, i, r) {
    var u = n(t);
    n.fn.lazyload = function(i) {
        function o() {
            var t = 0;
            e.each(function() {
                var i = n(this);
                if ((!f.skip_invisible || "none" !== i.css("display")) && !n.abovethetop(this, f) && !n.leftofbegin(this, f))
                    if (n.belowthefold(this, f) || n.rightoffold(this, f)) { if (++t > f.failure_limit) return !1 } else i.trigger("appear"), t = 0
            })
        }
        var s, e = this,
            f = { threshold: 0, failure_limit: 0, event: "scroll", effect: "show", container: t, data_attribute: "original", skip_invisible: !0, appear: null, load: null };
        return i && (r !== i.failurelimit && (i.failure_limit = i.failurelimit, delete i.failurelimit), r !== i.effectspeed && (i.effect_speed = i.effectspeed, delete i.effectspeed), n.extend(f, i)), s = f.container === r || f.container === t ? u : n(f.container), 0 === f.event.indexOf("scroll") && s.on(f.event, function() { return o() }), this.each(function() {
            var t = this,
                i = n(t);
            t.loaded = !1;
            i.one("appear", function() {
                if (!this.loaded) {
                    if (f.appear) {
                        var r = e.length;
                        f.appear.call(t, r, f)
                    }
                    n("<img />").on("load", function() {
                        var r, u;
                        i.hide().attr("src", i.data(f.data_attribute))[f.effect](f.effect_speed);
                        t.loaded = !0;
                        r = n.grep(e, function(n) { return !n.loaded });
                        e = n(r);
                        f.load && (u = e.length, f.load.call(t, u, f))
                    }).attr("src", i.data(f.data_attribute))
                }
            });
            0 !== f.event.indexOf("scroll") && i.on(f.event, function() { t.loaded || i.trigger("appear") })
        }), u.on("resize", function() { o() }), /iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion) && u.on("pageshow", function(t) {
            t = t.originalEvent || t;
            t.persisted && e.each(function() { n(this).trigger("appear") })
        }), n(t).on("load", function() { o() }), this
    };
    n.belowthefold = function(i, f) { var e; return e = f.container === r || f.container === t ? u.height() + u.scrollTop() : n(f.container).offset().top + n(f.container).height(), e <= n(i).offset().top - f.threshold };
    n.rightoffold = function(i, f) { var e; return e = f.container === r || f.container === t ? u.width() + u[0].scrollX : n(f.container).offset().left + n(f.container).width(), e <= n(i).offset().left - f.threshold };
    n.abovethetop = function(i, f) { var e; return e = f.container === r || f.container === t ? u.scrollTop() : n(f.container).offset().top, e >= n(i).offset().top + f.threshold + n(i).height() };
    n.leftofbegin = function(i, f) { var e; return e = f.container === r || f.container === t ? u[0].scrollX : n(f.container).offset().left, e >= n(i).offset().left + f.threshold + n(i).width() };
    n.inviewport = function(t, i) { return !(n.rightoffold(t, i) || n.leftofbegin(t, i) || n.belowthefold(t, i) || n.abovethetop(t, i)) };
    n.extend(n.fn, { "below-the-fold": function(t) { return n.belowthefold(t, { threshold: 0 }) }, "above-the-top": function(t) { return !n.belowthefold(t, { threshold: 0 }) }, "right-of-screen": function(t) { return n.rightoffold(t, { threshold: 0 }) }, "left-of-screen": function(t) { return !n.rightoffold(t, { threshold: 0 }) }, "in-viewport": function(t) { return n.inviewport(t, { threshold: 0 }) }, "above-the-fold": function(t) { return !n.belowthefold(t, { threshold: 0 }) }, "right-of-fold": function(t) { return n.rightoffold(t, { threshold: 0 }) }, "left-of-fold": function(t) { return !n.rightoffold(t, { threshold: 0 }) } })
}($, window, document);
$(function() {
    // longview();
    // $(window).scroll(function() {
    //     var n = $(window).height(),
    //         t = n + window.scrollY;
    //     t > n ? t >= $("footer").offset().top ? $("#slidetop").css("right", "-50px") : $("#slidetop").css("right", "20px") : $("#slidetop").css("right", "-50px")
    // })
});
// (function() {
//     var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
//     document.write('<script src="' + src + '" id="sozz"><\/script>');
// })();
// (function() {
//     var bp = document.createElement('script');
//     bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
//     var s = document.getElementsByTagName("script")[0];
//     s.parentNode.insertBefore(bp, s)
// })();